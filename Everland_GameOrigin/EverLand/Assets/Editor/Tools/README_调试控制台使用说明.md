# 🎮 Unity 游戏调试控制台使用说明

## 📋 概述

这是一个专为Unity游戏开发设计的编辑器调试工具，提供了全面的游戏调试功能，包括游戏控制、UI调试、网络调试、场景管理、性能监控和道具系统等模块。

## 🚀 快速开始

### 1. 打开调试控制台
- 在Unity编辑器顶部菜单栏找到 `Debug` 选项
- 点击 `Debug → 游戏控制台`
- 调试窗口将自动打开

### 2. 窗口布局
调试控制台采用标签页设计，包含以下4个主要模块：
- 🎮 **游戏内测试** - 游戏控制、道具系统、UI测试（可扩展）
- 🌐 **网络调试** - 连接设置、网络状态、网络测试
- 🌍 **场景管理** - 场景跳转、场景信息、场景操作
- 📊 **性能监控** - 监控设置、实时数据、性能操作

#### 游戏内测试子模块
游戏内测试模块采用子标签页设计，包含以下功能：
- 🎯 **游戏控制** - 时间控制、角色状态、快速操作
- 🎒 **道具系统** - 角色属性、道具操作、快速设置
- 🖥️ **UI测试** - 界面显示控制、UI操作、UI测试

## 🎯 功能详解

### 游戏内测试模块

#### 🎯 游戏控制子模块

#### ⏰ 时间控制
- **暂停/继续游戏**：控制游戏时间暂停和恢复
- **时间倍率调节**：调整游戏运行速度（0.1x - 5.0x）
- **重置时间**：将时间倍率重置为1.0

#### 👤 角色状态
- **无敌模式**：角色不受伤害
- **无限法力**：角色法力值无限
- **无冷却**：技能无冷却时间
- **满血/死亡**：快速设置角色生命状态

#### ⚡ 快速操作
- **传送功能**：快速传送到安全点或Boss位置
- **技能装备**：一键获得所有技能和装备

#### 🖥️ UI测试子模块

#### 📊 显示控制
- **显示FPS**：在游戏中显示帧率信息
- **显示调试信息**：显示详细的调试信息
- **显示碰撞框**：可视化显示碰撞检测框
- **UI调试模式**：启用UI调试功能

#### 🎮 UI操作
- **界面控制**：快速打开/关闭各种游戏界面
  - 背包、技能、商店、任务、设置界面
- **批量操作**：一键关闭所有UI界面

#### 🧪 UI测试
- **测试弹窗**：显示测试用的弹窗界面
- **分辨率切换**：测试不同分辨率下的UI表现
- **主题切换**：测试不同UI主题效果

### 网络调试模块

#### 🔗 连接设置
- **服务器配置**：设置服务器IP和端口
- **连接控制**：连接/断开服务器连接
- **自动重连**：启用自动重连功能

#### 📊 网络状态
- **实时监控**：显示连接状态、延迟、上传下载速度
- **真实数据**：显示实际的网络性能数据
- **状态信息**：实时更新网络连接状态

#### 🧪 网络测试
- **数据测试**：发送测试数据包
- **延迟模拟**：模拟网络延迟情况
- **断开模拟**：模拟网络断开情况

### 场景管理模块

#### 🚀 场景跳转
- **场景选择**：从下拉菜单选择目标场景
- **快速跳转**：一键跳转到指定场景
- **场景重载**：重新加载当前场景

#### 📋 场景信息
- **基本信息**：显示当前场景名称
- **对象统计**：显示场景中的对象数量
- **内存使用**：显示当前内存使用情况

#### ⚙️ 场景操作
- **垃圾清理**：清理场景中的无用对象
- **场景保存**：保存当前场景状态
- **性能分析**：分析场景性能表现

### 性能监控模块

#### ⚙️ 监控设置
- **内存显示**：显示内存使用情况
- **性能日志**：记录性能数据日志

#### 📊 实时数据
- **FPS监控**：使用平滑算法实时显示帧率，避免波动
- **帧时间**：显示每帧渲染时间（毫秒），基于Time.deltaTime计算
- **内存使用**：显示实际的内存占用情况，基于GC.GetTotalMemory
- **DrawCall统计**：通过场景Renderer组件精确计算，考虑多材质情况
- **三角面统计**：统计MeshRenderer、SkinnedMeshRenderer和Terrain的三角面数
- **场景统计**：显示场景中真实的对象数量

#### 🔧 性能操作
- **垃圾回收**：强制执行垃圾回收
- **性能报告**：生成详细的性能报告
- **场景优化**：执行场景优化操作

#### 🎒 道具系统子模块

#### 👤 角色属性
- **金币管理**：查看和修改角色金币数量
- **经验管理**：查看和修改角色经验值
- **等级管理**：查看和修改角色等级
- **快速增加**：一键增加金币和经验

#### 🎁 道具操作
- **道具解锁**：解锁所有道具
- **装备获得**：获得武器、防具等装备
- **消耗品**：获得药水、卷轴等消耗品

#### ⚡ 快速设置
- **稀有道具**：获得所有稀有道具
- **背包管理**：清空背包或重置角色数据

### 🔧 扩展性设计

#### 添加新的子标签页
游戏内测试模块采用可扩展设计，添加新的测试功能非常简单：

1. **修改配置数组**：
   ```csharp
   private readonly string[] gameTestSubTabNames = { "游戏控制", "道具系统", "UI测试", "新功能测试" };
   ```

2. **添加对应的绘制方法**：
   ```csharp
   private void DrawNewFeatureSubTab()
   {
       // 新功能的UI实现
   }
   ```

3. **在switch语句中添加case**：
   ```csharp
   case 3:
       DrawNewFeatureSubTab();
       break;
   ```

#### 扩展建议
- **战斗测试**：添加战斗系统相关的测试功能
- **AI测试**：添加AI行为测试功能
- **音效测试**：添加音效播放和测试功能
- **动画测试**：添加动画播放和测试功能

## 🛠️ 技术说明

### 架构设计
- **编辑器工具**：基于Unity EditorWindow开发
- **静态管理**：ConsoleManager为静态工具类，无需继承MonoBehaviour
- **模块化设计**：每个功能模块独立，便于维护和扩展

### 错误处理
- **GUI异常捕获**：自动捕获GUI布局错误
- **错误恢复**：提供重新加载窗口功能
- **调试日志**：所有操作都会输出到Unity Console

### 性能优化
- **滚动视图**：使用滚动视图处理大量内容
- **条件渲染**：根据选中标签页条件渲染内容
- **内存管理**：合理管理GUI资源

## 📝 使用注意事项

### 1. 编辑器专用
- 此工具仅在Unity编辑器中可用
- 不会影响最终的游戏构建

### 2. 游戏运行状态
- **🟢 游戏运行中**：所有调试功能可用，显示真实数据
- **🔴 游戏未运行**：大部分功能被禁用，数据重置为0防止误导
- 窗口顶部会显示当前游戏运行状态

### 3. 场景跳转功能
- **真实场景跳转**：在游戏运行时可以真正跳转到指定场景
- **场景要求**：当前支持场景：SampleScene、TestScene
- **Build Settings**：确保目标场景已添加到Build Settings中

### 4. 性能监控
- **真实FPS计算**：使用平滑算法计算FPS，避免帧率波动
- **真实内存监控**：显示实际的内存使用情况
- **真实渲染统计**：显示实际的DrawCall和三角面数量
- **防误导设计**：游戏未运行时显示0值，避免误导开发者

### 5. 调试信息
- 所有操作都会在Unity Console中输出调试信息
- 调试信息格式：`[调试控制台] 操作描述`

## 🔧 自定义扩展

### 添加新功能
1. 在相应的Draw方法中添加新的GUI元素
2. 实现具体的功能逻辑
3. 使用ConsoleManager.LogDebugInfo输出调试信息

### 修改场景列表
```csharp
private string[] sceneNames = { "你的场景1", "你的场景2", "你的场景3" };
```

### 添加新的标签页
1. 在tabNames数组中添加新标签页名称
2. 在OnGUI的switch语句中添加新的case
3. 实现对应的Draw方法

## 🐛 常见问题

### Q: 出现GUI布局错误怎么办？
A: 点击"重新加载窗口"按钮，或关闭窗口重新打开。

### Q: 按钮点击没有反应？
A: 检查Unity Console窗口，所有操作都会输出调试信息。

### Q: 如何添加新的调试功能？
A: 在相应的Draw方法中添加新的按钮和逻辑。

### Q: 场景跳转不工作？
A: 确保场景名称正确，且场景已添加到Build Settings中。场景跳转功能只在游戏运行时有效。

### Q: 为什么性能数据显示为0？
A: 这是正常现象。性能数据只在游戏运行时显示真实值，游戏未运行时显示0防止误导。

### Q: 为什么有些按钮是灰色的？
A: 这些按钮只在游戏运行时可用。启动游戏后按钮会变为可用状态。

## 📞 技术支持

如有问题或建议，请：
1. 检查Unity Console中的错误信息
2. 确认Unity版本兼容性
3. 查看代码注释了解实现细节

---

**版本**: 1.0  
**适用Unity版本**: 2020.3+  
**最后更新**: 2024年